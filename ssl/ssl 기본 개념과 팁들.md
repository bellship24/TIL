**목차**

- [1. 요약](#1-요약)
- [2. 루트 인증서 란?](#2-루트-인증서-란)
- [3. 웹브라우저에서 인증서 보는 방법](#3-웹브라우저에서-인증서-보는-방법)

**참고**

- [[Blog] Root CA 인증서는 무엇인가?](https://brunch.co.kr/@sangjinkang/47)

---

# 1. 요약

> SSL 인증서의 다양한 개념과 팀들을 기록한다.

# 2. 루트 인증서 란?

루트 인증서는 루트 인증 기관(CA)에서 관리하는 공개키 인증서나 자체 서명 인증서이다. 일반적으로 인증서는 ROOT, Intermediate, Leaf 3단계로 이루어져 있고 이를 인증서 체인(certificate chain) 이라고 한다. 사용자가 구입한 SSL 인증서는 Leaf 인증서를 의미하며 이는 인증서 체인의 일부이지 전체가 아니다. 이 3 개의 인증서 체인은 하위 구조의 인증서를 서명하고 상위 구조의 인증서를 참고하는 방식으로 만들어진다.

![3개의 인증서 체인](/.uploads/2021-07-18-11-32-20.png)

서버의 인증서를 신뢰하려면 루트 CA 로 추적할 수 있어야 한다. 브라우저가 웹 사이트에 접속하면 웹 사이트의 인증서를 다운로드하고 해당 인증서를 루트에 다시 연결하기 시작한다. 체인을 따라가며 신뢰할 수 있는 루트 인증서에 도달할 때까지 계속해서 역추적한다.

루트 CA 인증서는 CA 에서 자체 서명한(self-signed) 인증서로 공개키 기반 암호화를 사용한다. 모든 유효한 SSL 인증서는 업계에서 보안 리더로 알려진 신뢰할 수 있는 CA 가 발행한 루트 CA 인증서 아래 체인에 위치한다.

중간 인증서는 루트 인증서와 SSL 인증서 사이에 구분을 만들어 위험을 완화하도록 설계된 인증서이다. 이는 루트 인증서가 가장 많은 권한을 갖고 보호되어야 하기 때문에 루트 인증서가 손상될 경우를 대비한다.

# 3. 웹브라우저에서 인증서 보는 방법

인증서 체인을 살펴보자. 먼저, 아무 웹사이트에 접속하여 브라우저 주소창의 주소 앞 열쇠 모양을 클릭하여 팝업된 메뉴 중 `인증서 보기` 부분을 클릭한다.

![브라우저에서 인증서 찾는 방법](/.uploads/2021-07-18-11-38-49.png)

그러면 아래와 같이 인증서 정보를 볼 수 있다.

![인증서 정보 조회](/.uploads/2021-07-18-11-53-07.png)

이 웹사이트가 사용하는 인증서 정보는 다음과 같다.

- ROOT CA: DigiCert 라는 미국 회사가 ROOT CA 인증서를 만들었음.
- 중간 인증서: Thawte TLS RSA CA
- SSL 인증서: *.brunch.co.kr 도메인 전용 인증서

위에 인증서 중간에 보면 `인증서가 유효함` 이라는 문구가 있다. 이는 이 웹사이트에 설치된 인증서를 접속한 브라우저에서도 유효하다고 인정한 것이고 정상적으로 SSL 통신을 웹 서버와 진행할 수 있다는 의미이다. 브라우저 혹은 OS 는 믿을 수 있는 CA 리스트를 가지고 있고 이를 바탕으로 유효하고 적법한 인증서인지를 확인한다.

ROOT CA 인증서는 웹 브라우저의 특정 저장소에 포함되어 있고 일부 운영체제에는 사전 설치되어 있기 때문에 따로 다운로드할 필요는 없다. 루트 인증서를 발급한 기관이 운영체제가 신뢰할 수 있는 루트 CA 목록에 없으면 인증서 자체는 신뢰할 수 있는 인증서가 아니라는 경고가 아래와 같이 표시된다.

![신뢰할 수 없는 인증서 경고](/.uploads/2021-07-18-11-59-49.png)

어떤 ROOT CA 들이 브라우저에서 유효하다고 인정받고 있는지(Trusted ROOT CA Cert.) 리스트를 확인하는 방법으로 MacOS 에서는 keychain/시스템 키체인/시스템 루트/인증서 에서 확인 가능하다.

![MacOS 에서의 Trusted ROOT CA Cert](/.uploads/2021-07-18-12-34-11.png)
